<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!-- saved from url=(0040)http://www.elias.cn/Python/GetPythonPath -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>Python / 如何获得Python脚本所在目录的位置  | Elias的个人主页</title>
	<link rel="stylesheet" href="./Python _ 如何获得Python脚本所在目录的位置 _ Elias的个人主页_files/style.css" type="text/css">
	<link rel="stylesheet" href="./Python _ 如何获得Python脚本所在目录的位置 _ Elias的个人主页_files/color.css" type="text/css">
	<!--HTMLHeader--><style type="text/css"><!--
span.anchor {
	float: left;
	font-size: 10px;
	margin-left: -10px;
	width: 10px;
    position:relative; top:-0.1em;
	text-align: center;
}
span.anchor a { text-decoration: none; }
span.anchor a:hover { text-decoration: underline; }
ol.toc { text-indent:-20px; list-style: none; }
ol.toc ol.toc { text-indent:-40px; }
div.tocfloat { font-size: smaller; margin-bottom: 10px;
    border-top: 1px dotted #555555; border-bottom: 1px dotted #555555;
    padding-top: 5px; padding-bottom: 5px; 
    width: 38%; float: right; margin-left: 10px; clear: right;
    margin-right:-13px; padding-right: 13px; padding-left: 13px;
    background-color: #eeeeee; }
div.toc { font-size: smaller; 
    padding: 4px; border: 1px dotted #cccccc;
    background: #f7f7f7;
    margin-bottom: 10px; }
div.footnote { 
  width: 160px; 
  border-bottom: 1px solid blue;
  margin-bottom: 0.5em;
}
p.footnote {
  text-indent: -1em;
  margin-right: 3em;
  margin-left: 3em;
  margin-top: 0px;
  margin-bottom: 0.5em;
  font-size: smaller;
}
a.footnote {
  font-size: smaller;
}
.todo-form { border: none; }
.todo-form tr td { border: none; font-weight: plain; text-align: left; padding: 4px; }
.todo-form tr td.heading { text-align: right; width: 140px; padding-right: 6px; }
table.todo-list { border: 2px solid #ccc; }
table.todo-list tr.row1 { background-color: #eee; color: #555; }
table.todo-list tr.row1 td { border-bottom: 2px solid #ccc; }
table.todo-list tr:last-child.row1 td { border-bottom: none; }
table.todo-list th { background-color: #ddd; padding: 3px; font-weight: normal; border: 1px solid #ccc; color: #444; }
table.todo-list tr td { color: #666; }
table.todo-simple-list { margin-left: 0px; }
table.todo-simple-list tr td { border: none; padding: 4px; }
.todo-category-text { color: #666; border-bottom: 1px solid #ccc; }
.todo-description-text { color: #444; }
.todo-overdue-text { color: #f66; border-bottom: 1px solid #ccc; }
.todo-completed-text { color: #446600; border-bottom: 1px solid #ccc; }
.todo-legend { text-align: center; color: #555; font-size: smaller; }
  td.auth-none { background: #ffffff; text-align: center; }
  td.auth-site { background: #d0ffd0; text-align: center; }
  td.auth-group { background: #80e880; text-align: center; }
  td.auth-page { background: #00c000; text-align: center; }

div.sectionedit { float:right;font-size:smaller;}
.editconflict { color:green; 
  font-style:italic; margin-top:1.33em; margin-bottom:1.33em; }

  table.markup { border:2px dotted #ccf; width:90%; }
  td.markup1, td.markup2 { padding-left:10px; padding-right:10px; }
  table.vert td.markup1 { border-bottom:1px solid #ccf; }
  table.horiz td.markup1 { width:23em; border-right:1px solid #ccf; }
  table.markup caption { text-align:left; }
  div.faq p, div.faq pre { margin-left:2em; }
  div.faq p.question { margin:1em 0 0.75em 0; font-weight:bold; }
   
    .frame 
      { border:1px solid #cccccc; padding:4px; background-color:#f9f9f9; }
    .lfloat { float:left; margin-right:0.5em; }
    .rfloat { float:right; margin-left:0.5em; }
a.varlink { text-decoration:none; }
/**
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 */
.python  {font-family:monospace;}
.python .imp {font-weight: bold; color: red;}
.python .kw1 {color: #ff7700;font-weight:bold;}
.python .kw2 {color: #008000;}
.python .kw3 {color: #dc143c;}
.python .kw4 {color: #0000cd;}
.python .co1 {color: #808080; font-style: italic;}
.python .coMULTI {color: #808080; font-style: italic;}
.python .es0 {color: #000099; font-weight: bold;}
.python .br0 {color: black;}
.python .sy0 {color: #66cc66;}
.python .st0 {color: #483d8b;}
.python .nu0 {color: #ff4500;}
.python .me1 {color: black;}
.python span.xtra { display:block; }

.sourceblocklink {
  text-align: right;
  font-size: smaller;
}
.sourceblocktext {
  padding: 0.5em;
  border: 1px solid #808080;
  color: #000000;
  background-color: #f1f0ed;
}
.sourceblocktext div {
  font-family: monospace;
  font-size: small;
  line-height: 1;
  height: 1%;
}
.sourceblocktext div.head,
.sourceblocktext div.foot {
  font: italic medium serif;
  padding: 0.5em;
}

--></style><link rel="alternate" type="application/rss+xml" title="Elias的个人主页" href="http://www.elias.cn/?n=Site.AllRecentChanges&action=rss">
<link rel="alternate" type="application/atom+xml" title="Elias的个人主页" href="http://www.elias.cn/?n=Site.AllRecentChanges&action=atom"><link rel="shortcut icon" href="http://www.elias.cn/pub/favicon.ico" type="image/x-icon">  <meta name="robots" content="index,follow">
<script type="text/javascript">
function toggle(obj) {
    var elstyle = document.getElementById(obj).style;
    var text    = document.getElementById(obj + "tog");
    if (elstyle.display == 'none') {
        elstyle.display = 'block';
        text.innerHTML = "hide";
    } else {
        elstyle.display = 'none';
        text.innerHTML = "show";
    }
}
</script>
</head>

<body>
	<div id="page">
		<div id="header">
			<!--PageHeaderFmt-->
			<div id="siteheader">
				<h1 class="sitetitle"><a class="urllink" href="http://www.elias.cn/" rel="nofollow">Elias的个人主页</a></h1>
<div class="sitetag">
</div>

			</div>
			<!--/PageHeaderFmt-->

			<!--PageTabsFmt-->
			<div id="nav">
				<ul><li><a class="wikilink" href="http://www.elias.cn/Profiles/Elias">关于我</a>
</li><li><a class="wikilink" href="http://www.elias.cn/Main/MyIdea">我的观点</a>
</li><li><strong> <a target="_blank" class="urllink" href="http://blog.elias.cn/" rel="nofollow">我的Blog</a> </strong> <span style="display: none;"><a class="urllink" href="http://www.elias.cn/kolias/" rel="nofollow">'</a></span>
</li><li><strong> <a target="_blank" class="urllink" href="https://twitter.com/EliasCn" rel="nofollow">我的Twitter</a> </strong>
</li><li><a class="wikilink" href="http://www.elias.cn/PmWiki/PmWiki">PmWiki</a>
</li></ul>

			</div>
			<!--/PageTabsFmt-->
		</div>

		<div id="sidebar">
			<!--PageSearchFmt-->
			<form id="searchform" action="http://www.elias.cn/" method="get">
			<fieldset>
				<input class="hidden" type="hidden" name="n" value="Python.GetPythonPath">
				<input class="hidden" type="hidden" name="action" value="search">
				<input id="searchfield" type="text" name="q" value="">
				<input id="searchbutton" type="submit" name="searchbutton" value="搜索">
			</fieldset>
			</form>
			<!--/PageSearchFmt-->

			<!--PageRightFmt-->
			<ul><li><a class="wikilink" href="http://www.elias.cn/Main/HomePage">首页</a>
</li><li><a class="wikilink" href="http://www.elias.cn/Main/WikiSandbox">测试用的沙盘页</a>
</li><li><a class="wikilink" href="http://www.elias.cn/Site/AllRecentChanges">最近所有更新</a> (<a class="wikilink" href="http://www.elias.cn/Site/AllRecentChanges?action=rss">RSS</a>)
<ul><li><a class="wikilink" href="http://www.elias.cn/Site/AllRecentChangesShort">最近所有更新（简洁）</a>
</li></ul></li><li><strong> <a class="wikilink" href="http://www.elias.cn/En/HomePage">English Version</a> </strong>
</li></ul><p class="vspace sidehead"> <a class="wikilink" href="http://www.elias.cn/Main/QuickList">快速链接</a>
</p><ul><li><a class="wikilink" href="http://www.elias.cn/Elias/ToDo">我的待办事项（加密）</a>
</li><li><a class="wikilink" href="http://www.elias.cn/Python/HomePage">Python编程资料</a>
</li><li><a class="wikilink" href="http://www.elias.cn/IPhone/Dev">iOS 开发经验笔记</a>
</li><li><a class="wikilink" href="http://www.elias.cn/Linux/DebianLinux">Debian Gnu/Linux</a>
</li></ul><p class="vspace sidehead"> 内容分类
</p><ul><li><a class="wikilink" href="http://www.elias.cn/MyProject/HomePage">我的项目玩具</a>
</li><li><a class="wikilink" href="http://www.elias.cn/ComUse/HomePage">计算机使用</a>
</li><li><a class="wikilink" href="http://www.elias.cn/Linux/HomePage">Linux经验</a>
</li><li><a class="wikilink" href="http://www.elias.cn/Mac/HomePage">使用Mac系统</a>
</li><li><a class="wikilink" href="http://www.elias.cn/IPhone/HomePage">iPhone经验</a>
</li><li><a class="wikilink" href="http://www.elias.cn/Develop/HomePage">编程玩吧</a>
</li><li><a class="wikilink" href="http://www.elias.cn/Research/HomePage">也搞点科研</a>
</li><li><a class="wikilink" href="http://www.elias.cn/Other/HomePage">生活和娱乐</a>
</li></ul><p class="vspace sidehead"> <a target="_blank" class="urllink" href="http://www.pmwiki.org/" rel="nofollow">PmWiki系统</a>
</p><ul><li><a class="wikilink" href="http://www.elias.cn/Main/PmWiki">我的PmWiki经验</a>
</li><li><a class="wikilink" href="http://www.elias.cn/Main/Log">本站维护记录</a>
</li></ul><p class="vspace sidehead"> 友情链接
</p><ul><li><a target="_blank" class="urllink" href="http://alsofly.org/" rel="nofollow">飞的主页</a>
</li><li><a target="_blank" class="urllink" href="http://www.pmichaud.com/" rel="nofollow">pm教授</a>
</li><li><a target="_blank" class="urllink" href="http://arithboy.org/wiki/" rel="nofollow">王昭个人主页</a>
</li><li><a target="_blank" class="urllink" href="http://www.zoomquiet.org/" rel="nofollow">ZoomQuiet.org</a>
</li><li><a target="_blank" class="urllink" href="http://www.cbsr.ia.ac.cn/users/zzx/Chinese.html" rel="nofollow">张兆翔个人主页</a>
</li></ul><p class="vspace" style="text-align: right;"> <span style="font-size:83%"><a class="wikilink" href="http://www.elias.cn/Site/SideBar?action=edit">edit SideBar</a></span>
</p>

			<!--/PageRightFmt-->
		</div>

		<div id="content">
			<div id="pagelead">
				<div class="pageactions">
					<!--PageActionFmt-->
					<ul><li class="login"><a accesskey="l" rel="nofollow" class="wikilink" href="http://www.elias.cn/Python/GetPythonPath?action=login">Login</a>
</li><li class="browse"><a accesskey="" class="selflink" href="./Python _ 如何获得Python脚本所在目录的位置 _ Elias的个人主页_files/Python _ 如何获得Python脚本所在目录的位置 _ Elias的个人主页.html">查看</a>
</li><li class="edit"><a accesskey="e" rel="nofollow" class="wikilink" href="http://www.elias.cn/Python/GetPythonPath?action=edit">编辑</a>
</li><li class="diff"><a accesskey="h" rel="nofollow" class="wikilink" href="http://www.elias.cn/Python/GetPythonPath?action=diff">记录</a>
</li><li class="print"><a accesskey="" rel="nofollow" class="wikilink" href="http://www.elias.cn/Python/GetPythonPath?action=print">打印</a>
</li><li class="backlinks"> <a accesskey="b" rel="nofollow" class="wikilink" href="http://www.elias.cn/Python/GetPythonPath?action=search&q=link=Python.GetPythonPath">Backlinks</a>
</li></ul>

					<!--/PageActionFmt-->
				</div>

				<div class="pageheader">
					<!--PageTitleGroupFmt-->
					<a href="http://www.elias.cn/Python" class="pagegroup">Python</a>
					<!--/PageTitleGroupFmt-->
					<!--PageTitleFmt-->
					<h1><a href="./Python _ 如何获得Python脚本所在目录的位置 _ Elias的个人主页_files/Python _ 如何获得Python脚本所在目录的位置 _ Elias的个人主页.html">如何获得Python脚本所在目录的位置</a></h1>
					<!--/PageTitleFmt-->
				</div>

			</div>

			<!--PageText-->
<div id="wikitext">
<div style="margin-top: 0px;" class="tocfloat"><p style="margin-top: 0px;"><a name="toc" id="toc"></a><b>On this page...</b> (<a id="tocidtog" href="javascript:toggle('tocid');">hide</a>)</p><ol style="margin-top: 0px;" class="toc" id="tocid"><li style="margin-top: 0px;">1. <a href="http://www.elias.cn/Python/GetPythonPath#toc1"> 以前的方法</a></li><li style="margin-top: 0px;">2. <a href="http://www.elias.cn/Python/GetPythonPath#toc2"> 正确的方法</a></li><li style="margin-top: 0px;">3. <a href="http://www.elias.cn/Python/GetPythonPath#toc3"> 实例说明</a></li></ol></div>
<div class="vspace"></div><div class="sectionedit"><a name="sPython.GetPythonPath_1"></a><a href="http://www.elias.cn/Python/GetPythonPath?action=edit&s=1&auto=y&from=Python.GetPythonPath">(Edit Section ↓)</a></div>
<h2 style="margin-top: 0px;"><a name="toc1" id="toc1"></a>1.  以前的方法</h2>
<p>如果是要获得程序运行的当前目录所在位置，那么可以使用os模块的<span style="color: blue;">os.getcwd()</span>函数。
</p>
<p class="vspace">如果是要获得当前执行的脚本的所在目录位置，那么需要使用sys模块的<span style="color: blue;">sys.path[0]</span>变量或者<span style="color: blue;">sys.argv[0]</span>来获得。实际上sys.path是Python会去寻找模块的搜索路径列表，sys.path[0]和sys.argv[0]是一回事因为Python会自动把sys.argv[0]加入sys.path。
</p>
<p class="vspace">具体来说，如果你在C:\test目录下执行python getpath\getpath.py，那么os.getcwd()会输出“C:\test”，sys.path[0]会输出“C:\test\getpath”。
</p>
<p class="vspace">更特别地，如果你用py2exe模块把Python脚本编译为可执行文件，那么sys.path[0]的输出还会变化：
</p><ol><li>如果把依赖库用默认的方式打包为zip文件，那么sys.path[0]会输出“C:\test\getpath\libarary.zip”；
</li><li>如果在setup.py里面指定zipfile=None参数，依赖库就会被打包到exe文件里面，那么sys.path[0]会输出“C:\test\getpath\getpath.exe”。
</li></ol><div class="vspace"></div><div class="sectionedit"><a name="sPython.GetPythonPath_2"></a><a href="http://www.elias.cn/Python/GetPythonPath?action=edit&s=2&auto=y&from=Python.GetPythonPath">(Edit Section ↓)</a></div>
<h2 style="margin-top: 0px;"><a name="toc2" id="toc2"></a>2.  正确的方法</h2>
<p>但以上这些其实都不是脚本文件所在目录的位置。
</p>
<p class="vspace">比如C:\test目录下还有一个名为sub的目录；C:\test目录下有getpath.py，sub目录下有sub_path.py，getpath.py调用sub_path.py；我们在C:\test下执行getpath.py。如果我们在sub_path.py里面使用sys.path[0]，那么其实得到的是getpath.py所在的目录路径“C:\test”，因为Python虚拟机是从getpath.py开始执行的。如果想得到sub_path.py的路径，那么得这样：
</p><div class="sourceblock " id="sourceblock1">
  <div class="sourceblocktext"><div class="python"><span class="kw3">os</span>.<span class="me1">path</span>.<span class="me1">split</span><span class="br0">(</span><span class="kw3">os</span>.<span class="me1">path</span>.<span class="me1">realpath</span><span class="br0">(</span>__file__<span class="br0">)</span><span class="br0">)</span><span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span></div></div>
  <div class="sourceblocklink"><a href="http://www.elias.cn/Python/GetPythonPath?action=sourceblock&num=1" type="text/plain">[Get Code]</a></div>
</div>

<p></p>
<p class="vspace">其中__file__虽然是所在.py文件的完整路径，但是这个变量有时候返回相对路径，有时候返回绝对路径，因此还要用os.path.realpath()函数来处理一下。也即在这个例子里，os.path.realpath(__file__)输出是“C:\test\sub\sub_path.py”，而os.path.split(os.path.realpath(__file__))[0]输出才是“C:\test\sub”。
</p>
<div class="vspace"></div><div class="sectionedit"><a name="sPython.GetPythonPath_3"></a><a href="http://www.elias.cn/Python/GetPythonPath?action=edit&s=3&auto=y&from=Python.GetPythonPath">(Edit Section ↓)</a></div>
<h2 style="margin-top: 0px;"><a name="toc3" id="toc3"></a>3.  实例说明</h2>
<p>总之，举例来讲，os.getcwd()、sys.path[0] （sys.argv[0]）和__file__的区别是这样的：
</p>
<p class="vspace">假设目录结构是：
</p><pre> C:\test
  |
  [dir] getpath
    |
    [file] path.py
    [dir] sub
      |
      [file] sub_path.py
</pre><p class="vspace">然后我们在C:\test下面执行python getpath/path.py，这时sub_path.py里面与各种用法对应的值其实是：
</p><ul><li>os.getcwd()  “C:\test”，取的是起始执行目录
</li><li>sys.path[0]或sys.argv[0]  “C:\test\getpath”，取的是被初始执行的脚本的所在目录
</li><li>os.path.split(os.path.realpath(__file__))[0]  “C:\test\getpath\sub”，取的是__file__所在文件sub_path.py的所在目录
</li></ul>
</div>

		</div>

		<div id="footer">
			<!--PageFooterFmt-->
				<div class="footer-section">
					<p>Page last modified on 2014 年 04 月 10 日, 04:37 下午 　　　 （京ICP备10013669号，<a class="urllink" href="http://rashost.com/" rel="nofollow">瑞豪开源提供VPS</a>）
</p>

				</div>
				<div class="footer-section">
					
				</div>
				<div class="footer-about">
					
				</div>
			<!--/PageFooterFmt-->
			<hr class="clear">
		</div>

	</div>

	<div id="credits">
		<div class="alignleft">
			<a style="color:#7A9299;" href="http://www.ndesign-studio.com/resources/wp-themes/glossyblue/">GlossyBlue</a> theme adapted by <a href="http://solidgone.org/Skins/">David Gilbert</a>
		</div>
		<div class="alignright">
			Powered by <a href="http://pmwiki.com/">PmWiki</a>
		</div>
	</div>
<!--HTMLFooter-->


</body></html>